<!doctype html><html lang=zh-CN><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>使自己的博客具有国内国外镜像改善访客体验 | 途读</title><link rel="shortcut icon" href=https://cdn.jsdelivr.net/gh/dyxang/blog/favicon.ico><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/dyxang/blog/styles/main.css><link rel=alternate type=application/atom+xml title="使自己的博客具有国内国外镜像改善访客体验 | 途读 - Atom Feed" href=https://www.1inn.top/atom.xml><link rel=preconnect href=https://pic.downk.cc><link rel=preconnect href=https://p.pstatp.com><meta name=description content="让博客“同时”部署到 码云 和 Vercel。
本来是一整篇文章的，但是因为其中的部分可能对别人有用所以单独分离写了一篇文章《Gridea 临时支持 Gitee 的办法》。
具体实现方法看上面提到的文章，我简述一下不同之处

国际节点我选的..."><meta name=keywords content=博客,技术><script src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.3/build/highlight.min.js></script><div class=main><div class=main-content><div class=site-header><a href=https://www.1inn.top><!doctype html> <svg version=1.0 xmlns=http://www.w3.org/2000/svg width=100px height=100px viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid meet"><g id=layer101 fill=#202020 stroke=none><path d="M376 989 c-57 -14 -102 -45 -138 -96 -59 -86 -68 -163 -48 -403 5 -63 7 -116 5 -118 -3 -3 -28 -9 -57 -13 -58 -9 -103 -44 -93 -72 4 -9 36 -26 71 -37 79 -27 115 -56 143 -116 12 -25 40 -65 63 -90 l41 -44 125 0 c123 0 127 1 154 27 20 19 28 37 28 60 0 67 -33 101 -181 186 -75 44 -123 30 -78 -21 22 -25 24 -34 21 -125 -3 -94 -3 -97 -26 -97 -34 0 -79 46 -114 117 -33 65 -77 109 -120 120 -15 3 -43 13 -62 21 -26 11 -31 16 -19 22 29 17 182 31 375 35 203 4 291 -5 333 -32 20 -13 22 -20 17 -56 -10 -61 -46 -134 -99 -200 -45 -55 -46 -57 -22 -57 34 0 117 119 146 210 19 59 20 70 8 96 -8 16 -23 33 -35 38 -22 10 -27 48 -54 366 -13 154 -72 253 -167 279 -45 13 -163 13 -217 0z m234 -44 c50 -26 93 -90 104 -155 7 -39 45 -414 43 -416 -1 -1 -63 2 -137 6 -74 4 -137 7 -140 5 -8 -5 -240 -15 -240 -11 0 3 -3 12 -7 22 -5 14 -3 16 11 11 25 -10 155 19 177 39 30 27 24 53 -17 70 -39 16 -76 13 -137 -13 -20 -9 -40 -14 -43 -11 -3 3 -5 72 -5 152 0 155 4 172 58 244 30 40 72 62 138 72 62 10 162 2 195 -15z m-210 -464 c0 -15 -20 -24 -66 -31 -36 -6 -43 -4 -47 11 -6 21 9 26 71 28 23 0 42 -3 42 -8z m168 -328 c46 -35 45 -78 -3 -99 -70 -29 -75 -24 -75 66 0 80 0 81 23 69 12 -6 37 -22 55 -36z"/><path d="M591 519 c-52 -16 -81 -39 -81 -65 0 -31 27 -44 89 -44 100 0 171 54 128 97 -19 19 -91 25 -136 12z m119 -37 c0 -20 -28 -32 -77 -32 -37 0 -53 4 -53 13 0 8 3 17 7 20 9 10 123 9 123 -1z"/></g><g id=layer102 fill=#595959 stroke=none><path d="M376 989 c-57 -14 -102 -45 -138 -96 -59 -86 -68 -163 -48 -403 5 -63 7 -116 5 -118 -3 -3 -28 -9 -57 -13 -58 -9 -103 -44 -93 -72 4 -9 36 -26 71 -37 81 -27 112 -54 147 -123 41 -80 87 -120 141 -123 35 -2 45 1 49 15 3 14 11 18 33 14 19 -3 25 -2 16 5 -9 6 -12 31 -10 86 l3 78 50 -34 c41 -27 51 -39 53 -66 3 -28 -1 -34 -30 -48 l-33 -15 33 6 c27 6 32 4 32 -13 0 -11 -6 -23 -13 -25 -6 -3 -3 -6 7 -6 33 -2 76 48 76 86 0 67 -33 101 -181 186 -75 44 -123 30 -78 -21 22 -25 24 -34 21 -125 -3 -94 -3 -97 -26 -97 -34 0 -79 46 -114 117 -33 65 -77 109 -120 120 -15 3 -43 13 -62 21 -26 11 -31 16 -19 22 29 17 182 31 375 35 203 4 291 -5 333 -32 20 -13 22 -20 17 -56 -10 -61 -46 -134 -99 -200 -45 -55 -46 -57 -22 -57 34 0 117 119 146 210 19 59 20 70 8 96 -8 16 -23 33 -35 38 -22 10 -27 48 -54 366 -13 154 -72 253 -167 279 -45 13 -163 13 -217 0z m234 -44 c50 -26 93 -90 104 -155 7 -39 45 -414 43 -416 -1 -1 -63 2 -137 6 -74 4 -137 7 -140 5 -8 -5 -240 -15 -240 -11 0 3 -3 12 -7 22 -5 14 -3 16 11 11 25 -10 155 19 177 39 30 27 24 53 -17 70 -39 16 -76 13 -137 -13 -20 -9 -40 -14 -43 -11 -3 3 -5 72 -5 152 0 155 4 172 58 244 30 40 72 62 138 72 62 10 162 2 195 -15z m-210 -464 c0 -15 -20 -24 -66 -31 -36 -6 -43 -4 -47 11 -6 21 9 26 71 28 23 0 42 -3 42 -8z m-130 -37 c0 -8 -9 -14 -20 -14 -11 0 -20 7 -20 15 0 8 5 15 11 15 5 0 7 6 3 13 -5 8 -2 8 9 -2 9 -7 17 -20 17 -27z"/><path d="M540 799 c-19 -5 -90 -12 -157 -15 -90 -5 -123 -11 -123 -20 0 -24 20 -25 171 -9 147 15 189 25 189 45 0 12 -32 11 -80 -1z"/><path d="M437 654 c-6 -6 -1 -72 9 -123 5 -22 7 -22 20 -9 12 12 14 27 7 73 -7 54 -20 75 -36 59z"/><path d="M591 519 c-52 -16 -81 -39 -81 -65 0 -31 27 -44 89 -44 100 0 171 54 128 97 -19 19 -91 25 -136 12z m119 -37 c0 -20 -28 -32 -77 -32 -37 0 -53 4 -53 13 0 8 3 17 7 20 9 10 123 9 123 -1z m-146 -11 c8 -13 -4 -42 -15 -35 -12 7 -12 44 0 44 6 0 12 -4 15 -9z"/></g></svg></a><h1 class="site-title webfont">途读</h1><p class="site-description webfont">我的小站<div class="menu-container webfont"><a href=/ class=menu>主页面 </a><a href=/post/about/ class=menu>关于我 </a><a href=/post/peng-you/ class=menu>朋友们 </a><a href=/wiki/ class=menu>知识库 </a><a href=/tags/ class=menu>云标签 </a><a href=/archives/ class=menu>总归档</a></div><div class=social-container></div></div><div class=post-detail><article class=post><h2 class=post-title>使自己的博客具有国内国外镜像改善访客体验</h2><div class=post-info><span>2020-11-07 </span><span>3 min read </span><span><a href=https://www.1inn.top/tag/bo-ke/ class=post-tag># 博客 </a><a href=https://www.1inn.top/tag/rGLdBibQG/ class=post-tag># 技术</a></span></div><img class=post-feature-image src=https://pic.imgdb.cn/item/5fa655b21cd1bbb86be5042f.jpg alt=""><div class=post-content-wrapper><div class=post-content><p>让博客“同时”部署到 码云 和 Vercel。<br>本来是一整篇文章的，但是因为其中的部分可能对别人有用所以单独分离写了一篇文章《Gridea 临时支持 Gitee 的办法》。<br>具体实现方法看上面提到的文章，我简述一下不同之处<p>国际节点我选的是 Vercel ，通过导入 Github的仓库来部署网站，与仓库同步更新，与 Github Pages不同，有世界各地的 CDN 支持，包括亚洲也很有几个CDN边缘服务器（台湾、香港、日本、韩国等）,速度没得说。<br>国内节点我选的是 Gitee，虽然 Coding 挺不错（属于腾讯），但是提供的二级域名是随机的长字符串，不方便记忆且我自己没有买域名的打算，再加上双方的免费版我测出的 ip不同，码云的来自上海，Coding 来自新加坡<br>我目前正在用的博客系统是 Gridea，不支持直接部署到Gitee，也不支持同时部署到两个平台，最关键的一点是 Gridea 要填自己的博客网址，也就是说 我同步到 Vercel（1inn.vercel.app）上后，还得本地把网站文件中所有<code>1inn.vercel.app</code>替换成<code>dyxang.gitee.io</code>，再同步到 Gitee（dyxang.gitee.io）。所以在一次次这种繁琐的操作后，我烦躁了，然后花了半天时间完成解决办法。<br>具体流程如下<br><img src=https://pic.imgdb.cn/item/5fa653d41cd1bbb86be49331.png alt="" loading=lazy><br>我的 Github Action 文件：<pre><code class=language-yaml>name: 博客节点同步
on: [push]
//如要使用请移除注释
jobs:
  job1:
    name: 先把国际节点的网址替换成国内节点的网址
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Find and Replace
        uses: jacobtomlinson/gha-find-replace@master
        with:
          find: &quot;1inn.vercel.app&quot;
          replace: &quot;dyxang.gitee.io&quot;
          //这里使用的是全文替换的 Action
  job2:
    needs: [job1]
    //needs 的意思是当 job1 完成后再进行 job2，不加 needs 则三个任务同时进行，会出错/超时 等等问题
    name: 把该仓库同步到 Gitee（使用白名单只同步这个仓库）
    runs-on: ubuntu-latest
    steps:
    - name: Checkout source codes
      uses: actions/checkout@v1
    - name: Mirror Github to Gitee with white list
      uses: Yikun/hub-mirror-action@master
      with:
        src: github/dyxang
        dst: gitee/dyxang
        dst_key: ${{ secrets.GITEE_PRIVATE_KEY }}
        dst_token:  ${{ secrets.GITEE_TOKEN }}
        white_list: &quot;dyxang&quot;
        force_update: true
        debug: true
  job3:
    needs: [job2]
    name: 再重新把网址替换为原网址确保国际节点网站保持原样
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Find and Replace
        uses: jacobtomlinson/gha-find-replace@master
        with:
          find: &quot;dyxang.gitee.io&quot;
          replace: &quot;1inn.vercel.app&quot;
//把 Github 仓库文件还原，让 Vercel 部署时正常使用
</code></pre></div><div class=toc-container></div></div></article></div><div class=next-post><div class=next>下一篇</div><a href=https://www.1inn.top/post/ge-ren-de-bo-ke-xie-zuo-de-liu-cheng/ ><h3 class=post-title>浅谈个人的博客写作的流程</h3></a></div><hr><div class=next-post><div class=next>上一篇</div><a href=https://www.1inn.top/post/gridea-zhi-chi-gitee-de-ban-fa/ ><h3 class=post-title>Gridea 支持 Gitee 的临时办法</h3></a></div><div id=talkmoe></div><script>function loadComments(){var e,n;"undefined"==typeof Waline?(e={src:"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js",onload:()=>{newWaline()}},(n=document.createElement("script")).defer=!0,n.crossOrigin="anonymous",Object.keys(e).forEach(i=>{n[i]=e[i]}),document.body.appendChild(n)):newWaline()}function newWaline(){new Waline({el:"#talkmoe",serverURL:"https://talk-pi.vercel.app",placeholder:"Hello!留下你的足迹吧 ！",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili"]})}loadComments()</script><div class="site-footer webfont">坚持写作，源自二零一五<script src=https://cdn.jsdelivr.net/gh/instantpage/instant.page/instantpage.min.js></script><a class=rss href=https://www.1inn.top/atom.xml target=_blank><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=24 height=24><path fill=none d="M0 0h24v24H0z"/><path d="M3 3c9.941 0 18 8.059 18 18h-3c0-8.284-6.716-15-15-15V3zm0 7c6.075 0 11 4.925 11 11h-3a8 8 0 0 0-8-8v-3zm0 7a4 4 0 0 1 4 4H3v-4z"/></svg> RSS</a></div></div></div><script>hljs.initHighlightingOnLoad();let mainNavLinks=document.querySelectorAll(".markdownIt-TOC a");window.addEventListener("scroll",e=>{let n=window.scrollY;mainNavLinks.forEach((e,s)=>{let t=document.getElementById(decodeURI(e.hash).substring(1)),i=null;mainNavLinks[s+1]&&(i=document.getElementById(decodeURI(mainNavLinks[s+1].hash).substring(1))),t.offsetTop<=n?i?i.offsetTop>n?e.classList.add("current"):e.classList.remove("current"):e.classList.add("current"):e.classList.remove("current")})})</script>
