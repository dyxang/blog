<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gridea 支持 Gitee 的临时办法 | 途读</title>
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/dyxang/dyxang/favicon.ico">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/dyxang/dyxang/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Gridea 支持 Gitee 的临时办法 | 途读 - Atom Feed" href="https://www.1inn.top/atom.xml">
<!--link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700"-->
<link rel="preconnect" href="https://pic.downk.cc">
<link rel="preconnect" href="https://p.pstatp.com">
    <meta name="description" content="
为了让小白也能理解，所以可能有些废话，请谅解。另外，其实不只是有一种方法
同时，Gitee个人版每次代码更新后网站是不会自动更新网站，需要手动刷新,请斟酌是否选择 Gitee，解决办法[1]


只在 Gitee 上部署
准备
首先你需要..." />
    <meta name="keywords" content="博客,技术" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.3/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://www.1inn.top">
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid meet">
<g id="layer101" fill="#202020" stroke="none">
<path d="M376 989 c-57 -14 -102 -45 -138 -96 -59 -86 -68 -163 -48 -403 5 -63 7 -116 5 -118 -3 -3 -28 -9 -57 -13 -58 -9 -103 -44 -93 -72 4 -9 36 -26 71 -37 79 -27 115 -56 143 -116 12 -25 40 -65 63 -90 l41 -44 125 0 c123 0 127 1 154 27 20 19 28 37 28 60 0 67 -33 101 -181 186 -75 44 -123 30 -78 -21 22 -25 24 -34 21 -125 -3 -94 -3 -97 -26 -97 -34 0 -79 46 -114 117 -33 65 -77 109 -120 120 -15 3 -43 13 -62 21 -26 11 -31 16 -19 22 29 17 182 31 375 35 203 4 291 -5 333 -32 20 -13 22 -20 17 -56 -10 -61 -46 -134 -99 -200 -45 -55 -46 -57 -22 -57 34 0 117 119 146 210 19 59 20 70 8 96 -8 16 -23 33 -35 38 -22 10 -27 48 -54 366 -13 154 -72 253 -167 279 -45 13 -163 13 -217 0z m234 -44 c50 -26 93 -90 104 -155 7 -39 45 -414 43 -416 -1 -1 -63 2 -137 6 -74 4 -137 7 -140 5 -8 -5 -240 -15 -240 -11 0 3 -3 12 -7 22 -5 14 -3 16 11 11 25 -10 155 19 177 39 30 27 24 53 -17 70 -39 16 -76 13 -137 -13 -20 -9 -40 -14 -43 -11 -3 3 -5 72 -5 152 0 155 4 172 58 244 30 40 72 62 138 72 62 10 162 2 195 -15z m-210 -464 c0 -15 -20 -24 -66 -31 -36 -6 -43 -4 -47 11 -6 21 9 26 71 28 23 0 42 -3 42 -8z m168 -328 c46 -35 45 -78 -3 -99 -70 -29 -75 -24 -75 66 0 80 0 81 23 69 12 -6 37 -22 55 -36z"/>
<path d="M591 519 c-52 -16 -81 -39 -81 -65 0 -31 27 -44 89 -44 100 0 171 54 128 97 -19 19 -91 25 -136 12z m119 -37 c0 -20 -28 -32 -77 -32 -37 0 -53 4 -53 13 0 8 3 17 7 20 9 10 123 9 123 -1z"/>
</g>
<g id="layer102" fill="#595959" stroke="none">
<path d="M376 989 c-57 -14 -102 -45 -138 -96 -59 -86 -68 -163 -48 -403 5 -63 7 -116 5 -118 -3 -3 -28 -9 -57 -13 -58 -9 -103 -44 -93 -72 4 -9 36 -26 71 -37 81 -27 112 -54 147 -123 41 -80 87 -120 141 -123 35 -2 45 1 49 15 3 14 11 18 33 14 19 -3 25 -2 16 5 -9 6 -12 31 -10 86 l3 78 50 -34 c41 -27 51 -39 53 -66 3 -28 -1 -34 -30 -48 l-33 -15 33 6 c27 6 32 4 32 -13 0 -11 -6 -23 -13 -25 -6 -3 -3 -6 7 -6 33 -2 76 48 76 86 0 67 -33 101 -181 186 -75 44 -123 30 -78 -21 22 -25 24 -34 21 -125 -3 -94 -3 -97 -26 -97 -34 0 -79 46 -114 117 -33 65 -77 109 -120 120 -15 3 -43 13 -62 21 -26 11 -31 16 -19 22 29 17 182 31 375 35 203 4 291 -5 333 -32 20 -13 22 -20 17 -56 -10 -61 -46 -134 -99 -200 -45 -55 -46 -57 -22 -57 34 0 117 119 146 210 19 59 20 70 8 96 -8 16 -23 33 -35 38 -22 10 -27 48 -54 366 -13 154 -72 253 -167 279 -45 13 -163 13 -217 0z m234 -44 c50 -26 93 -90 104 -155 7 -39 45 -414 43 -416 -1 -1 -63 2 -137 6 -74 4 -137 7 -140 5 -8 -5 -240 -15 -240 -11 0 3 -3 12 -7 22 -5 14 -3 16 11 11 25 -10 155 19 177 39 30 27 24 53 -17 70 -39 16 -76 13 -137 -13 -20 -9 -40 -14 -43 -11 -3 3 -5 72 -5 152 0 155 4 172 58 244 30 40 72 62 138 72 62 10 162 2 195 -15z m-210 -464 c0 -15 -20 -24 -66 -31 -36 -6 -43 -4 -47 11 -6 21 9 26 71 28 23 0 42 -3 42 -8z m-130 -37 c0 -8 -9 -14 -20 -14 -11 0 -20 7 -20 15 0 8 5 15 11 15 5 0 7 6 3 13 -5 8 -2 8 9 -2 9 -7 17 -20 17 -27z"/>
<path d="M540 799 c-19 -5 -90 -12 -157 -15 -90 -5 -123 -11 -123 -20 0 -24 20 -25 171 -9 147 15 189 25 189 45 0 12 -32 11 -80 -1z"/>
<path d="M437 654 c-6 -6 -1 -72 9 -123 5 -22 7 -22 20 -9 12 12 14 27 7 73 -7 54 -20 75 -36 59z"/>
<path d="M591 519 c-52 -16 -81 -39 -81 -65 0 -31 27 -44 89 -44 100 0 171 54 128 97 -19 19 -91 25 -136 12z m119 -37 c0 -20 -28 -32 -77 -32 -37 0 -53 4 -53 13 0 8 3 17 7 20 9 10 123 9 123 -1z m-146 -11 c8 -13 -4 -42 -15 -35 -12 7 -12 44 0 44 6 0 12 -4 15 -9z"/>
</g>
</svg>
  </a>
  <h1 class="site-title webfont">
    途读
  </h1>
  <p class="site-description webfont">
    我的小站
  </p>
  <div class="menu-container webfont">
    
      
        <a href="/" class="menu">
          主页面
        </a>
      
    
      
        <a href="/post/about/" class="menu">
          关于我
        </a>
      
    
      
        <a href="/post/peng-you/" class="menu">
          朋友们
        </a>
      
    
      
        <a href="/wiki/" class="menu">
          知识库
        </a>
      
    
      
        <a href="/tags/" class="menu">
          云标签
        </a>
      
    
      
        <a href="/archives/" class="menu">
          总归档
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Gridea 支持 Gitee 的临时办法
            </h2>
            <div class="post-info">
              <span>
                2020-11-07
              </span>
              <span>
                4 min read
              </span>
            <span>
              
                <a href="https://www.1inn.top/tag/bo-ke/" class="post-tag">
                  # 博客
                </a>
              
                <a href="https://www.1inn.top/tag/rGLdBibQG/" class="post-tag">
                  # 技术
                </a>
              </span>
            </div>
            
              <img class="post-feature-image" src="https://pic.imgdb.cn/item/5fa64f2b1cd1bbb86be39bd3.jpg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <blockquote>
<p>为了让小白也能理解，所以可能有些废话，请谅解。另外，其实不只是有一种方法<br>
同时，<strong>Gitee个人版每次代码更新后网站是不会自动更新网站，<s>需要手动刷新,请斟酌是否选择 Gitee</s></strong>，解决办法<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
</blockquote>
<!-- more -->
<h1 id="只在-gitee-上部署">只在 Gitee 上部署</h1>
<h2 id="准备">准备</h2>
<p>首先你需要具有</p>
<ul>
<li>懂得 Github /Github Actions 基础操作<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></li>
<li>有一个 Github 账号</li>
<li>已经配置好了 Gridea，并能把博客同步到一个 Github 上与你的 Gitee 用户名同名的仓库 ，（例子：github/sample/sample）</li>
</ul>
<p>注：Gitee 与 Github 不同的是，Gitee 上名为<code>dyxang</code>的仓库开启网站托管后网址是<code>dyxang.gitee.io</code>， 而  Github 上是名为<code>dyxang.github.io</code>的仓库开启网站托管网址才是 <code>dyxang.github.io</code>。</p>
<h2 id="开始">开始</h2>
<ol>
<li>阅读一下<a href="https://github.com/Yikun/hub-mirror-action">这个项目</a>，如果感觉自己能行，那么可以跳过以下所有步骤自己来动手</li>
<li>照着 （1）中的“参数详解”标题下的小标题中“必选参数 dst_key 与 dst_token”来设置，获取到三个数值，<strong>ssh 公钥、ssh 密钥、Gitee 的API tokens</strong></li>
<li>把 <strong>ssh 公钥</strong> 填到 Gitee 的 设置&gt;安全设置&gt;SSH公钥</li>
<li>在 Github 的同名仓库的 Settings&gt;Secrets 下，新建 GITEE_PRIVATE_KEY、GITEE_TOKEN，分别填入 <strong>ssh 密钥</strong>与 <strong>Gitee 的API tokens</strong></li>
<li>在仓库中选择 Actions&gt;New workflow ，然后点 Skip this and set up a workflow yourself 新建 main.yml 文件<br>
关于 yml 文件的内容可以直接用我已经设置好的：</li>
</ol>
<pre><code>on: push
name: Github 同步到 Gitee
jobs:
  run:
    name: 把该仓库同步到 Gitee（使用白名单只同步这个仓库）
    runs-on: ubuntu-latest
    steps:
    - name: Checkout source codes
      uses: actions/checkout@v1
    - name: Mirror Github to Gitee with white list
      uses: Yikun/hub-mirror-action@master
      with:
        src: github/你的用户名
        dst: gitee/你的用户名
        dst_key: ${{ secrets.GITEE_PRIVATE_KEY }}
        dst_token:  ${{ secrets.GITEE_TOKEN }}
        white_list: &quot;你的用户名&quot;
        force_update: true
        debug: true
</code></pre>
<p>然后再在本地存放博客的文件夹里的放上一个路径为 static/.github/workflows/main.yml 的同样文件（因为 Gridea在上传过程中会把原有仓库里的 main.yml 给删掉）。</p>
<ol>
<li>在 Gitee 上开启 pages 服务</li>
<li>到此，每当你在 Gridea 提交了”同步“，则 Github 会自动把仓库推送到 Gitee，然后需要你在Gitee 后台手动刷新<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> Pages 服务<br>
<img src="https://pic.imgdb.cn/item/5fafb26d1cd1bbb86bf0daf9.png" alt="" loading="lazy"></li>
</ol>
<h2 id="提示">提示</h2>
<ul>
<li>文章具有时效性，可能后续 Gridea 会增加对 Gitee 的支持，或者文章中的语法、使用方式发生变化，操作中请结合具体实际情况作出改动。</li>
<li><strong>不要直接复制</strong> demo 里的 yml文件进行配置（里面有一个 uses: ./. 是相对路径），要看清楚</li>
<li>（1）的方法中，交给 Gitee 的是<strong>公钥</strong>（id_rsa.pub 文件全文），填到 Github 的是<strong>密钥</strong>（id_rsa 文件全文）</li>
</ul>
<h2 id="后记">后记</h2>
<p>真的不容易……以前根本没有详细了解 Github action，导致写配置文件的时候老是写错，写错又得看到底错在哪里，找文档和搜索引擎（这个阶段主要是因为我个人的独特需求导致的，详情请看下一篇文章），这一堆堆的报错通知啊……<br>
<img src="https://pic.imgdb.cn/item/5fa64f631cd1bbb86be3a972.png" alt="" loading="lazy"></p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://github.com/yanglbme/gitee-pages-action">自动部署 Gitee Pages</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html">《Github Actions 入门教程》</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p>项目地址 &gt; 服务 &gt;  Gitee Pages &gt; 更新 <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#%E5%8F%AA%E5%9C%A8-gitee-%E4%B8%8A%E9%83%A8%E7%BD%B2">只在 Gitee 上部署</a>
<ul>
<li><a href="#%E5%87%86%E5%A4%87">准备</a></li>
<li><a href="#%E5%BC%80%E5%A7%8B">开始</a></li>
<li><a href="#%E6%8F%90%E7%A4%BA">提示</a></li>
<li><a href="#%E5%90%8E%E8%AE%B0">后记</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://www.1inn.top/post/shi-zi-ji-de-bo-ke-ju-you-guo-nei-guo-wai-jing-xiang-gai-shan-fang-ke-ti-yan/">
              <h3 class="post-title">
                使自己的博客具有国内国外镜像改善访客体验
              </h3>
            </a>
          </div>
        
<hr>
        
          <div class="next-post">
            <div class="next">上一篇</div>
            <a href="https://www.1inn.top/post/shang-wu-ben-yu-le-yong-zhi-lu/">
              <h3 class="post-title">
                商务本娱乐用小记
              </h3>
            </a>
          </div>
        
        
          

          
            <div id="talkmoe"></div>
<script type="text/javascript">
loadComments();
function loadComments() {
  if (typeof Waline === 'undefined') {
    var getScript = (options) => {
      var script = document.createElement('script');
      script.defer = true;
      script.crossOrigin = 'anonymous';
      Object.keys(options).forEach((key) => {
          script[key] = options[key];
      });
      document.body.appendChild(script);
    };
    getScript({
      src: 'https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js',
      onload: () => {
        newWaline();
      }
    });
  } else {
    newWaline();
  }
}
function newWaline() {
  new Waline({
      el: '#talkmoe',
      serverURL: 'https://talk-pi.vercel.app',
      placeholder:'Hello!留下你的足迹吧 ！'
      emoji: [
    'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo',
    'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili'
  ],
  });
}
</script>
          
        

        <div class="site-footer webfont">
  坚持写作，源自二零一五<script src="https://cdn.jsdelivr.net/gh/instantpage/instant.page/instantpage.min.js"></script>

    <a class="rss" href="https://www.1inn.top/atom.xml" target="_blank"><svg xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24" width="24" height="24">
        <path fill="none" d="M0 0h24v24H0z" />
        <path
          d="M3 3c9.941 0 18 8.059 18 18h-3c0-8.284-6.716-15-15-15V3zm0 7c6.075 0 11 4.925 11 11h-3a8 8 0 0 0-8-8v-3zm0 7a4 4 0 0 1 4 4H3v-4z" />
      </svg> RSS
    </a>
</div>
      </div>
    </div>
    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");


      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>